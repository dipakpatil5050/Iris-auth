<!--<UserControl x:Class="IrisAuth.Views.UserLogsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:IrisAuth.Views"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d"
             d:DesignWidth="1100" d:DesignHeight="720"
             Background="#F3F6FB">   
    <UserControl.Resources>
        --><!-- Palette --><!--
        <SolidColorBrush x:Key="Accent" Color="#6B3BFF"/>
        <SolidColorBrush x:Key="HeaderBg" Color="#F8FAFF"/>
        <SolidColorBrush x:Key="GridBorder" Color="#E7E7F0"/>
        <SolidColorBrush x:Key="MutedText" Color="#7A8595"/>
        <Style x:Key="RoundedButton" TargetType="Button">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Margin" Value="6,0"/>
            <Setter Property="Background" Value="{StaticResource Accent}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border CornerRadius="18" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="GhostButton" TargetType="Button" BasedOn="{StaticResource RoundedButton}">
            <Setter Property="Background" Value="#28C2A6"/>
        </Style>

        --><!-- DataGrid row hover/selection --><!--
        <Style TargetType="DataGridRow" x:Key="DataGridRowStyle">
            <Setter Property="Margin" Value="0,6"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridRow">
                        <Border x:Name="RowBorder" Background="{TemplateBinding Background}" CornerRadius="6" Padding="0">
                            <DataGridCellsPresenter/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="RowBorder" Property="Background" Value="#FFF7F0FF"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="RowBorder" Property="Background" Value="#F3E9FF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        --><!-- DataGrid header style --><!--
        <Style TargetType="DataGridColumnHeader" x:Key="DGHeaderStyle">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#3A4A63"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="0,0,0,0"/>
            <Setter Property="Padding" Value="8,12"/>
        </Style>
    </UserControl.Resources>

    <Grid Margin="18">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="12"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        --><!-- Header row: Sort + Search + Buttons --><!--
        <Border Grid.Row="0" Background="{StaticResource HeaderBg}" CornerRadius="8" Padding="14" BorderBrush="{StaticResource GridBorder}" BorderThickness="1">
            <DockPanel LastChildFill="False" VerticalAlignment="Center">
            
                --><!-- Middle: Search --><!--
                <StackPanel DockPanel.Dock="Left" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,18,0">
                    <StackPanel>
                        <TextBlock Text="Search by ID, username, email, or name:" FontSize="12" Foreground="{StaticResource MutedText}" Margin="0,0,6,2"/>
                        <DockPanel>
                            <TextBox Width="560" Height="30" VerticalAlignment="Center" Padding="8,4" />
                            <Button Style="{StaticResource RoundedButton}" Width="110" Height="32" Content="🔍  Search" DockPanel.Dock="Right" />
                        </DockPanel>
                    </StackPanel>
                </StackPanel>

                --><!-- Right: Add new
                <StackPanel DockPanel.Dock="Right" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
                    <Button Style="{StaticResource GhostButton}" Width="120" Height="34" Content="+ Add new"/>
                </StackPanel>
                 --><!--
            </DockPanel>
        </Border>

        --><!-- Spacer --><!--
        <Border Grid.Row="1" Height="1" Background="Transparent"/>

        --><!-- Table area --><!--
        <Border Grid.Row="2" Background="White" CornerRadius="8" Padding="10" BorderBrush="{StaticResource GridBorder}" BorderThickness="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                --><!-- Column headings bar (thin purple line under header like screenshot) --><!--
                <Border Grid.Row="0" BorderBrush="{StaticResource Accent}" BorderThickness="0,0,0,2" Margin="0,0,0,10" />

                --><!-- DataGrid placeholder (design-only columns) --><!--
                <DataGrid Grid.Row="1"
                      AutoGenerateColumns="False"
                      HeadersVisibility="Column"
                      CanUserAddRows="False"
                      RowStyle="{StaticResource DataGridRowStyle}"
                      ColumnHeaderStyle="{StaticResource DGHeaderStyle}"
                      GridLinesVisibility="None"
                      RowHeaderWidth="0"
                      SelectionMode="Single"
                      IsReadOnly="True">

                    --><!-- Avatar + ID --><!--
                    <DataGridTemplateColumn Header="ID" Width="110">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="6">
                                    <Border Width="44" Height="44" CornerRadius="22" ClipToBounds="True" VerticalAlignment="Center">
                                        --><!-- Placeholder image; when you bind later keep AvatarUri --><!--
                                        <Image Source="https://i.pravatar.cc/48" Stretch="UniformToFill"/>
                                    </Border>
                                    <TextBlock Text="10101" Foreground="{StaticResource MutedText}" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    --><!-- Username --><!--
                    <DataGridTextColumn Header="Username" Binding="{Binding Username}" Width="150"/>

                    --><!-- Full name --><!--
                    <DataGridTextColumn Header="Full name" Binding="{Binding FullName}" Width="2*"/>

                    --><!-- Email --><!--
                    <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="2.5*"/>

                    --><!-- Roles --><!--
                    <DataGridTextColumn Header="Roles" Binding="{Binding Roles}" Width="2*"/>

                    --><!-- Actions --><!--
                    <DataGridTemplateColumn Header="" Width="140">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,6,0" >
                                    <Button Width="36" Height="30" Margin="6,0" ToolTip="View">📘</Button>
                                    <Button Width="36" Height="30" Margin="6,0" ToolTip="Edit">✏️</Button>
                                    <Button Width="36" Height="30" Margin="6,0" ToolTip="Delete">🗑️</Button>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid>

                --><!-- Footer / pagination area (design placeholder) --><!--
                <Border Grid.Row="2" Visibility="Collapsed"/>
            </Grid>
        </Border>
    </Grid>
</UserControl>-->
<!--<UserControl x:Class="IrisAuth.Views.UserLogsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:IrisAuth.ViewModels"
             Background="#F3F6FB">

    --><!-- VIEWMODEL --><!--
    <UserControl.DataContext>
        <vm:UserLogsViewModel/>
    </UserControl.DataContext>

    <Grid Margin="18">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        --><!-- ================= SEARCH BAR ================= --><!--
        <Border Grid.Row="0"
                Background="#F8FAFF"
                BorderBrush="#E7E7F0"
                BorderThickness="1"
                CornerRadius="8"
                Padding="12"
                Margin="0,0,0,12">

            <DockPanel>

                --><!-- Search Box with Watermark --><!--
                <Grid Width="560" Height="30">
                    <TextBox Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                             Padding="8,4"
                             VerticalContentAlignment="Center"/>

                    <TextBlock Text="Search username / action / reason"
                               Foreground="#9AA4B2"
                               Margin="12,0,0,0"
                               VerticalAlignment="Center"
                               IsHitTestVisible="False">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SearchText}" Value="">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding SearchText}" Value="{x:Null}">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </Grid>

                <Button Content="Search"
                        Width="100"
                        Margin="10,0,0,0"
                        DockPanel.Dock="Right"
                        Style="{StaticResource RoundedButton}"
                        Command="{Binding SearchCommand}"/>
            </DockPanel>
        </Border>

        --><!-- ================= DATAGRID ================= --><!--
        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding Logs}"
                  SelectedItem="{Binding SelectedLog}"
                  Style="{DynamicResource DataGridStyle1}"
                  RowStyle="{DynamicResource DataGridRowStyle1}"
                  CellStyle="{DynamicResource DataGridCellStyle1}"
                  ColumnHeaderStyle="{DynamicResource DataGridColumnHeaderStyle1}"
                  HeadersVisibility="Column"
                  AutoGenerateColumns="False"
                  ColumnHeaderHeight="42"
                  RowHeaderWidth="0"
                  IsReadOnly="True">

            <DataGrid.Columns>

                <DataGridTextColumn Header="Date / Time"
                                    Binding="{Binding EventTime, StringFormat=dd.MM.yyyy HH:mm:ss}"
                                    Width="180"/>

                <DataGridTextColumn Header="Username"
                                    Binding="{Binding Username}"
                                    Width="140"/>

                <DataGridTextColumn Header="Action"
                                    Binding="{Binding Action}"
                                    Width="160"/>

                <DataGridTextColumn Header="Details"
                                    Binding="{Binding Details}"
                                    Width="2*"/>

                <DataGridTextColumn Header="Old Value"
                                    Binding="{Binding OldValue}"
                                    Width="160"/>

                <DataGridTextColumn Header="New Value"
                                    Binding="{Binding NewValue}"
                                    Width="160"/>

                <DataGridTextColumn Header="Reason"
                                    Binding="{Binding Reason}"
                                    Width="2*"/>

                --><!-- ACTION COLUMN --><!--
                <DataGridTemplateColumn Header="Actions" Width="100">
                    <DataGridTemplateColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader"
                               BasedOn="{StaticResource DataGridColumnHeaderStyle1}">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        </Style>
                    </DataGridTemplateColumn.HeaderStyle>

                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal"
                                        HorizontalAlignment="Center">

                                <Button Style="{StaticResource gridEditButton}"
                                        ToolTip="View">
                                    <TextBlock Text="👁" FontSize="14"/>
                                </Button>

                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

            </DataGrid.Columns>
        </DataGrid>

        --><!-- ================= FOOTER ================= --><!--
        <Border Grid.Row="2"
                HorizontalAlignment="Right"
                BorderBrush="#DEE4EC"
                BorderThickness="1"
                CornerRadius="5"
                Padding="6"
                Background="#FFFFFF"
                Margin="0,10,10,10">

            <TextBlock Text="Audit logs"
                       Foreground="#6C7682"/>
        </Border>

    </Grid>
</UserControl>--><!--
<UserControl x:Class="IrisAuth.Views.UserLogsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:IrisAuth.ViewModels">

    <UserControl.DataContext>
        <vm:UserLogsViewModel/>
    </UserControl.DataContext>

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        --><!-- FILTER BAR --><!--
        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">

            <DatePicker SelectedDate="{Binding FromDate}" Width="140"/>
            <DatePicker SelectedDate="{Binding ToDate}" Width="140" Margin="6,0"/>

            <TextBox Width="300"
                     Height="30"
                     Margin="6,0"
                     Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"/>

            <Button Content="Search"
                    Style="{StaticResource RoundedButton}"
                    Command="{Binding SearchCommand}"/>

            <Button Content="Export Excel"
                    Style="{StaticResource GhostButton}"
                    Margin="10,0"
                    Command="{Binding ExportCsvCommand}"/>

            <Button Content="Export PDF"
                    Style="{StaticResource GhostButton}"
                    Command="{Binding ExportPdfCommand}"/>

        </StackPanel>

        --><!-- DATA GRID --><!--
        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding Logs}"
                  SelectedItem="{Binding SelectedLog}"
                  Style="{DynamicResource DataGridStyle1}"
                  RowStyle="{DynamicResource DataGridRowStyle1}"
                  CellStyle="{DynamicResource DataGridCellStyle1}"
                  ColumnHeaderStyle="{DynamicResource DataGridColumnHeaderStyle1}"
                  AutoGenerateColumns="False"
                  ColumnHeaderHeight="42"
                  RowHeaderWidth="0"
                  IsReadOnly="True">

            <DataGrid.Columns>

                <DataGridTextColumn Header="Date / Time"
                    Binding="{Binding EventTime, StringFormat=dd.MM.yyyy HH:mm:ss}"
                    Width="180"/>

                <DataGridTextColumn Header="Username"
                    Binding="{Binding Username}"
                    Width="140"/>

                <DataGridTextColumn Header="Action"
                    Binding="{Binding Action}"
                    Width="160"/>

                <DataGridTextColumn Header="Details"
                    Binding="{Binding Details}"
                    Width="2*"/>

                <DataGridTextColumn Header="Old"
                    Binding="{Binding OldValue}"
                    Width="160"/>

                <DataGridTextColumn Header="New"
                    Binding="{Binding NewValue}"
                    Width="160"/>

                <DataGridTextColumn Header="Reason"
                    Binding="{Binding Reason}"
                    Width="2*"/>

                <DataGridTemplateColumn Header="Actions" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="View"
                                    Style="{StaticResource gridEditButton}"
                                    Command="{Binding DataContext.ViewCommand,
                                      RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                    CommandParameter="{Binding}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>-->
<UserControl x:Class="IrisAuth.Views.UserLogsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:IrisAuth.ViewModels">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Styles/CommonButtons.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <UserControl.DataContext>
        <vm:UserLogsViewModel/>
    </UserControl.DataContext>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ================= FILTER BAR ================= -->
        <Border Background="#F8FAFF"
                BorderBrush="#E0E4EE"
                BorderThickness="1"
                CornerRadius="8"
                Padding="12"
                Margin="0,0,0,12">

            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">

                <DatePicker SelectedDate="{Binding FromDate}"
                            Width="140"/>

                <TextBlock Text="to"
                           Margin="8,0"
                           VerticalAlignment="Center"/>

                <DatePicker SelectedDate="{Binding ToDate}"
                            Width="140"/>

                <TextBox Width="220"
                         Margin="12,0"
                         Height="30"
                         VerticalContentAlignment="Center"
                         Text="{Binding SearchText,
                                UpdateSourceTrigger=PropertyChanged}"/>

                <Button Content="Search"
                        Style="{StaticResource RoundedButton}"
                        Command="{Binding SearchCommand}"/>

                <Button Content="Export Excel"
                        Style="{StaticResource GhostButton}"
                        Command="{Binding ExportExcelCommand}"/>

                <Button Content="Print / PDF"
                        Style="{StaticResource GhostButton}"
                        Command="{Binding PrintCommand}"/>

            </StackPanel>
        </Border>

        <!-- ================= GRID ================= -->
        <Border Grid.Row="1"
                Background="White"
                BorderBrush="#E0E4EE"
                BorderThickness="1"
                CornerRadius="8"
                Padding="8">

            <!--<DataGrid ItemsSource="{Binding Logs}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      IsReadOnly="True"
                      HeadersVisibility="Column"
                      GridLinesVisibility="Horizontal"
                      RowHeaderWidth="0">

                <DataGrid.Columns>

                    <DataGridTextColumn Header="Date / Time"
                        Binding="{Binding EventTime,
                            StringFormat=dd.MM.yyyy HH:mm:ss}"
                        Width="180"/>

                    <DataGridTextColumn Header="Username"
                        Binding="{Binding Username}"
                        Width="140"/>

                    <DataGridTextColumn Header="Action"
                        Binding="{Binding Action}"
                        Width="140"/>

                    <DataGridTextColumn Header="Reason"
                        Binding="{Binding Reason}"
                        Width="*"/>

                    --><!-- VIEW BUTTON --><!--
                    <DataGridTemplateColumn Header="View"
                                            Width="90">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="View"
                                        Style="{StaticResource GridViewButton}"
                                        Command="{Binding
                                          DataContext.ViewCommand,
                                          RelativeSource={RelativeSource
                                            AncestorType=DataGrid}}"
                                        CommandParameter="{Binding}"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                </DataGrid.Columns>

            </DataGrid>-->
            <DataGrid Grid.Row="2"
          ItemsSource="{Binding Logs}"
          SelectedItem="{Binding SelectedLog}"
          Style="{DynamicResource DataGridStyle1}"
          RowStyle="{DynamicResource DataGridRowStyle1}"
          CellStyle="{DynamicResource DataGridCellStyle1}"
          ColumnHeaderStyle="{DynamicResource DataGridColumnHeaderStyle1}"
          HeadersVisibility="Column"
          AutoGenerateColumns="False"
          ColumnHeaderHeight="42"
          RowHeaderWidth="0"
          IsReadOnly="True">

                <DataGrid.Columns>

                    <!-- DATE / TIME -->
                    <DataGridTextColumn Header="Date / Time"
                            Binding="{Binding EventTime, StringFormat=dd.MM.yyyy HH:mm:ss}"
                            Width="180"/>

                    <!-- USERNAME -->
                    <DataGridTemplateColumn Header="Username" Width="160">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Username}"
                               FontWeight="SemiBold"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <!-- ACTION -->
                    <DataGridTextColumn Header="Action"
                            Binding="{Binding Action}"
                            Width="160"/>

                    <!-- DETAILS -->
                    <DataGridTextColumn Header="Details"
                            Binding="{Binding Details}"
                            Width="2*"/>

                    <!-- OLD VALUE -->
                    <DataGridTextColumn Header="Old Value"
                            Binding="{Binding OldValue}"
                            Width="160"/>

                    <!-- NEW VALUE -->
                    <DataGridTextColumn Header="New Value"
                            Binding="{Binding NewValue}"
                            Width="160"/>

                    <!-- REASON -->
                    <DataGridTextColumn Header="Reason"
                            Binding="{Binding Reason}"
                            Width="2*"/>

                    <!-- ACTION BUTTON -->
                    <DataGridTemplateColumn Header="View" Width="100">
                        <DataGridTemplateColumn.HeaderStyle>
                            <Style TargetType="DataGridColumnHeader"
                       BasedOn="{StaticResource DataGridColumnHeaderStyle1}">
                                <Setter Property="HorizontalContentAlignment"
                            Value="Center"/>
                            </Style>
                        </DataGridTemplateColumn.HeaderStyle>

                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center">

                                    <Button Style="{StaticResource gridEditButton}"
                                ToolTip="View Details"
                                Command="{Binding DataContext.ViewCommand,
                                  RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                CommandParameter="{Binding}">
                                        <TextBlock Text="👁"
                                       FontSize="14"/>
                                    </Button>

                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>




