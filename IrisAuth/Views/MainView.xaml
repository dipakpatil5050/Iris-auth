<Window x:Class="IrisAuth.Views.MainView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
        xmlns:vm="clr-namespace:IrisAuth.ViewModels"
        xmlns:views="clr-namespace:IrisAuth.Views"
        xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
        Height="720"
        Width="1080"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">

    <!-- ================= VIEWMODEL ================= -->
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <!-- ================= VIEW ↔ VM MAPPING ================= -->
    <Window.Resources>
        <DataTemplate DataType="{x:Type vm:HomeViewModel}">
            <views:HomeView/>
        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:UserManagementViewModel}">
            <views:UserManagementView/>
        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:GroupManagementViewModel}">
            <views:GroupManagementView/>
        </DataTemplate>

        <DataTemplate DataType="{x:Type vm:UserLogsViewModel}">
            <views:UserLogsView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:AppSettingsViewModel}">
            <views:AppSettingsView/>
        </DataTemplate>
    </Window.Resources>

    <!-- ================= ROOT CARD ================= -->
    <Border CornerRadius="20"
            Background="#EFF2F7">

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- ================= LEFT MENU ================= -->
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Menu Toggle Button -->
                <Button Style="{StaticResource topButton}"
                        HorizontalAlignment="Left"
                        Margin="20 25 0 10">
                    <Icon:PackIconMaterial Kind="Menu" Width="16" Height="16"/>
                </Button>

                <!-- Sidebar -->
                <Border Grid.Row="1"
                        Background="#623ED0"
                        CornerRadius="0 40 0 30">

                    <DockPanel>

                        <!-- Logo -->
                        <Border Width="80"
                                Height="80"
                                Background="White"
                                CornerRadius="100"
                                DockPanel.Dock="Top"
                                HorizontalAlignment="Center"
                                Margin="0 -30 0 10">
                            <Ellipse>
                                <Ellipse.Fill>
                                    <ImageBrush ImageSource="https://randomuser.me/api/portraits/men/75.jpg"/>
                                </Ellipse.Fill>
                            </Ellipse>
                        </Border>

                        <!-- Title -->
                        <TextBlock Text="Velox"
                                   Foreground="White"
                                   FontSize="20"
                                   FontWeight="SemiBold"
                                   TextAlignment="Center"
                                   DockPanel.Dock="Top"/>

                        <TextBlock Text="Admin, Surat"
                                   Foreground="#D0BFFF"
                                   FontSize="13"
                                   TextAlignment="Center"
                                   Margin="0 2 0 10"
                                   DockPanel.Dock="Top"/>

                        <Separator Margin="20"
                                   Background="#7E5FDC"
                                   Height="0.8"
                                   DockPanel.Dock="Top"/>

                        <!-- Menu Items -->
                        <StackPanel DockPanel.Dock="Top">

                            <Button Style="{StaticResource menuButton}"
                                    Command="{Binding ShowHomeViewCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <Icon:PackIconMaterial Kind="HomeVariant"
                                                           Style="{StaticResource menuButtonIcon}"/>
                                    <TextBlock Text="Dashboard"/>
                                </StackPanel>
                            </Button>

                            <Button Style="{StaticResource menuButton}"
                                    Command="{Binding ShowUserManagementViewCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <Icon:PackIconMaterial Kind="AccountMultipleOutline"
                                                           Style="{StaticResource menuButtonIcon}"/>
                                    <TextBlock Text="User Management"/>
                                </StackPanel>
                            </Button>

                            <Button Style="{StaticResource menuButton}"
                                    Command="{Binding ShowUserGroupViewCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <Icon:PackIconMaterial Kind="Database"
                                                           Style="{StaticResource menuButtonIcon}"/>
                                    <TextBlock Text="Group Master"/>
                                </StackPanel>
                            </Button>

                            <Button Style="{StaticResource menuButton}"
                                    Command="{Binding ShowUserLogsViewCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <Icon:PackIconMaterial Kind="FileDocumentOutline"
                                                           Style="{StaticResource menuButtonIcon}"/>
                                    <TextBlock Text="User Logs"/>
                                </StackPanel>
                            </Button>
                            <Button Style="{StaticResource menuButton}"
                                            Visibility="{Binding ShowSettingsMenu,
                                                        Converter={StaticResource BooleanToVisibilityConverter}}"
                                                        Command="{Binding ShowSettingsViewCommand}">
                                         <StackPanel Orientation="Horizontal">
                                            <Icon:PackIconMaterial Kind="CogOutline"
                                             Style="{StaticResource menuButtonIcon}"/>
                                            <TextBlock Text="Application Settings"/>
                                         </StackPanel>
                            </Button>

                        </StackPanel>

                        <!-- Logout -->
              
                        <Button Style="{StaticResource menuButton}" VerticalAlignment="Bottom" 
                                DockPanel.Dock="Bottom" 
                                Margin="15 0 15 20"
                                Command="{Binding LogoutCommand}"
                                CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}">
                            <StackPanel Orientation="Horizontal">
                                <Icon:PackIconMaterial Kind="Logout" Style="{StaticResource menuButtonIcon}"/>
                                <TextBlock Text="Logout"/>
                            </StackPanel>
                        </Button>

                    </DockPanel>
                </Border>
            </Grid>

            <!-- ================= MAIN CONTENT ================= -->
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="45"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- ===== TOP HEADER ===== -->
                <DockPanel Grid.Row="0"
                       Background="#E6EBF3"
                       LastChildFill="True"
                       MouseLeftButtonDown="Header_MouseDown"
                       >

                    <!-- RIGHT : WINDOW CONTROLS -->
                    <StackPanel Orientation="Horizontal"
                            DockPanel.Dock="Right"
                            Margin="0 0 10 0">

                        <!-- MINIMIZE -->
                        <Button x:Name="btnMinimize"
                            BorderThickness="0"
                            Cursor="Hand"
                            Margin="6 0"
                            Click="Minimize_Click">

                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="#28AEED"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#278BEF"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>

                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Width="24"
                                        Height="24"
                                        CornerRadius="9"
                                        Background="LightGray">
                                        <ContentPresenter
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                            <Icon:PackIconMaterial Kind="WindowMinimize" Foreground="BlueViolet"
                           Style="{StaticResource gridButtonIcon}"/>
                           
                        </Button>

                        <!-- MAXIMIZE -->
                        <Button x:Name="btnMaximize"
                            BorderThickness="0"
                            Cursor="Hand"
                            Margin="6 0"
                            Click="Maximize_Click">

                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="#6BCB77"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#57B56A"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>

                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Width="24"
                                        Height="24"
                                        CornerRadius="9"
                                        Background="LightGray">
                                        <ContentPresenter
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>

                            <Icon:PackIconMaterial Kind="WindowMaximize" Foreground="BlueViolet"
                                     Style="{StaticResource gridButtonIcon}"/>

                        </Button>

                        <!-- CLOSE -->
                        <Button x:Name="btnClose"
                            BorderThickness="0"
                            Cursor="Hand"
                            Margin="6 0"
                            Click="Close_Click">

                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="#DA34AE"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#C62DAE"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>

                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Width="24"
                                        Height="24"
                                        CornerRadius="9"
                                        Background="LightGray">
                                        <ContentPresenter
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>

                            <Icon:PackIconMaterial Kind="Close" Foreground="OrangeRed"
                           Style="{StaticResource gridButtonIcon}"/>
                        </Button>

                    </StackPanel>

                    <!-- LEFT : TITLE -->
                    <TextBlock Text="Iris Authentication System"
                           VerticalAlignment="Center"
                           FontSize="15"
                           FontWeight="SemiBold"
                           Margin="15 0"/>
                </DockPanel>

                <!-- ===== PAGE CONTENT ===== -->
                <ContentControl Grid.Row="1"
                                Content="{Binding CurrentChildView}"
                                Margin="12"/>
            </Grid>
        </Grid>
    </Border>
</Window>
